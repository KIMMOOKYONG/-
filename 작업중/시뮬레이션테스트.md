```
!pip install pint
!pip install modsimpy
!pip install yfinance

```

```python
from modsim import *
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import yfinance as yf

```

```python
#----------------------------
# function that will create a dataframe for a single stock
# create_stock_df("GOOG", "2022-01-01", "2022-12-31", 20)
#----------------------------
def create_stock_df(stock, start, end, SMA):

    df = yf.download(stock, start = start, end = end, progress = False)

    df["day"] = range(1, len(df) + 1) # +1을하는 이유는 시작번호가 1로 시작하기 때문이다.
    df["stock"] = stock
    df["SMA_x"] = df.iloc[:,4].rolling(window=SMA).mean()
    df["shifted_close"] = df["Close"].shift(1)
    df["close_difference"] = df["Close"] - df["shifted_close"]
    df = df.reset_index()

    return df

```
![image](https://user-images.githubusercontent.com/102650331/186828637-1bc7b7ea-4af9-41fc-bfd4-79e80595aa2e.png)

```python
#----------------------------
# function to plot the stock dataframe's closing prices
# plot_stock_price(df)
#----------------------------
def plot_stock_price(df):
    x = df["Date"]
    y = df["Close"]
    plt.plot(x, y)

    plt.xlabel("date")
    plt.ylabel("price/share")
    plt.xticks(rotation=70)
    plt.title("stock price over time")
    plt.show()

```
![image](https://user-images.githubusercontent.com/102650331/186828695-90612b18-59a9-401a-8003-c481686a911d.png)
